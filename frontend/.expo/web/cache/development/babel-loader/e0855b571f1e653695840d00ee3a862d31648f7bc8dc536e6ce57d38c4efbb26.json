{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nconst _excluded = [\"pointerEvents\", \"children\", \"style\"];\nvar _jsxFileName = \"/home/data2/AIFace/AICoffeeLeaf/frontend/node_modules/expo-gl/build/Canvas.js\";\nimport * as React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PixelRatio from \"react-native-web/dist/exports/PixelRatio\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport createElement from 'react-native-web/dist/exports/createElement';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction getElement(component) {\n  try {\n    return findDOMNode(component);\n  } catch {\n    return component;\n  }\n}\nfunction setRef(refProp, ref) {\n  if (!refProp) return;\n  if (typeof refProp === 'function') {\n    refProp(ref);\n  } else if ('current' in refProp) {\n    refProp.current = ref;\n  }\n}\nconst Canvas = React.forwardRef((props, ref) => createElement('canvas', Object.assign({}, props, {\n  ref\n})));\nconst CanvasWrapper = _ref => {\n  let {\n      pointerEvents,\n      children,\n      style\n    } = _ref,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  const [size, setSize] = React.useState(null);\n  const ref = React.useRef(null);\n  const _canvasRef = React.useRef(null);\n  function updateCanvasSize() {\n    const canvas = _canvasRef.current;\n    if (typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement) {\n      const size = getSize();\n      const scale = PixelRatio.get();\n      canvas.style.width = `${size.width}px`;\n      canvas.style.height = `${size.height}px`;\n      canvas.width = size.width * scale;\n      canvas.height = size.height * scale;\n    }\n  }\n  function getSize() {\n    if (size) {\n      return size;\n    } else if (!ref.current || false) {\n      return {\n        width: 0,\n        height: 0\n      };\n    }\n    const element = getElement(ref.current);\n    const {\n      offsetWidth: width = 0,\n      offsetHeight: height = 0\n    } = element;\n    return {\n      width,\n      height\n    };\n  }\n  const onLayout = event => {\n    const {\n      nativeEvent: {\n        layout: {\n          width,\n          height\n        }\n      }\n    } = event;\n    if (width !== size?.width || height !== size.height) {\n      setSize({\n        width,\n        height\n      });\n      if (props.onLayout) {\n        props.onLayout(event);\n      }\n    }\n  };\n  React.useEffect(() => {\n    if (ref.current != null) {\n      setSize(getSize());\n    }\n  }, [ref]);\n  React.useEffect(() => {\n    updateCanvasSize();\n  }, [size]);\n  React.useEffect(() => {\n    const canvas = _canvasRef.current;\n    if (canvas) {\n      updateCanvasSize();\n    }\n    setRef(props.canvasRef, canvas);\n  }, [_canvasRef]);\n  return _jsxDEV(View, Object.assign({}, props, {\n    style: [styles.wrapper, style],\n    ref: ref,\n    onLayout: onLayout,\n    children: [_jsxDEV(Canvas, {\n      ref: _canvasRef,\n      pointerEvents: pointerEvents,\n      style: StyleSheet.absoluteFill\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), children]\n  }), void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 13\n  }, this);\n};\nconst styles = StyleSheet.create({\n  wrapper: {\n    pointerEvents: 'box-none'\n  }\n});\nexport default CanvasWrapper;","map":{"version":3,"names":["React","findDOMNode","PixelRatio","StyleSheet","View","createElement","jsxDEV","_jsxDEV","getElement","component","setRef","refProp","ref","current","Canvas","forwardRef","props","Object","assign","CanvasWrapper","_ref","pointerEvents","children","style","_objectWithoutPropertiesLoose","_excluded","size","setSize","useState","useRef","_canvasRef","updateCanvasSize","canvas","HTMLCanvasElement","getSize","scale","get","width","height","element","offsetWidth","offsetHeight","onLayout","event","nativeEvent","layout","useEffect","canvasRef","styles","wrapper","absoluteFill","fileName","_jsxFileName","lineNumber","columnNumber","create"],"sources":["/home/data2/AIFace/AICoffeeLeaf/frontend/node_modules/expo-gl/src/Canvas.tsx"],"sourcesContent":["import * as React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { LayoutChangeEvent, PixelRatio, StyleSheet, View, ViewProps } from 'react-native';\nimport createElement from 'react-native-web/dist/exports/createElement';\n\nfunction getElement(component) {\n  try {\n    return findDOMNode(component);\n  } catch {\n    return component;\n  }\n}\n\nfunction setRef<T>(refProp: React.Ref<T>, ref: T | null) {\n  if (!refProp) return;\n\n  if (typeof refProp === 'function') {\n    refProp(ref);\n  } else if ('current' in refProp) {\n    // @ts-ignore\n    refProp.current = ref;\n  }\n}\n\nconst Canvas = React.forwardRef(\n  (props: React.ComponentProps<typeof View>, ref: React.Ref<HTMLCanvasElement>) =>\n    createElement('canvas', { ...props, ref })\n);\n\nconst CanvasWrapper: React.FunctionComponent<\n  ViewProps & {\n    canvasRef: React.Ref<HTMLCanvasElement>;\n  }\n> = ({ pointerEvents, children, style, ...props }) => {\n  const [size, setSize] = React.useState<{ width: number; height: number } | null>(null);\n\n  const ref = React.useRef<View>(null);\n  const _canvasRef = React.useRef<HTMLCanvasElement>(null);\n\n  function updateCanvasSize(): void {\n    const canvas = _canvasRef.current;\n    if (typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement) {\n      const size = getSize();\n      const scale = PixelRatio.get();\n\n      canvas.style.width = `${size.width}px`;\n      canvas.style.height = `${size.height}px`;\n\n      canvas.width = size.width * scale;\n      canvas.height = size.height * scale;\n    }\n  }\n\n  function getSize(): { width: number; height: number } {\n    if (size) {\n      return size;\n    } else if (!ref.current || typeof window === 'undefined') {\n      return { width: 0, height: 0 };\n    }\n    const element = getElement(ref.current);\n    const { offsetWidth: width = 0, offsetHeight: height = 0 } = element;\n    return { width, height };\n  }\n\n  const onLayout = (event: LayoutChangeEvent) => {\n    const {\n      nativeEvent: {\n        layout: { width, height },\n      },\n    } = event;\n\n    if (width !== size?.width || height !== size.height) {\n      setSize({ width, height });\n\n      if (props.onLayout) {\n        props.onLayout(event);\n      }\n    }\n  };\n\n  React.useEffect(() => {\n    if (ref.current != null) {\n      setSize(getSize());\n    }\n  }, [ref]);\n\n  React.useEffect(() => {\n    updateCanvasSize();\n  }, [size]);\n\n  React.useEffect(() => {\n    const canvas = _canvasRef.current;\n    if (canvas) {\n      updateCanvasSize();\n    }\n    setRef(props.canvasRef, canvas);\n  }, [_canvasRef]);\n\n  return (\n    <View {...props} style={[styles.wrapper, style]} ref={ref} onLayout={onLayout}>\n      <Canvas ref={_canvasRef} pointerEvents={pointerEvents} style={StyleSheet.absoluteFill} />\n      {children}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    pointerEvents: 'box-none',\n  },\n});\n\nexport default CanvasWrapper;\n"],"mappings":"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"},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}